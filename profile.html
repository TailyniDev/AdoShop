<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Perfil - AdoShop</title>
    <link rel="stylesheet" href="styles/global.css">
    <script src="scripts/app.js"></script>
    <link rel="stylesheet" href="styles/profile.css">
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="styles/responsivo.css">
</head>
<body>
<header>
    <div class="logo">
        <img src="assets/logo.avif" alt="Logo" width="20%">
    </div>

    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="shop.html">Shop</a></li>
            <li><a href="sobrenos.html">Sobre n√≥s</a></li>
        </ul>
    </nav>

    <div class="search-bar">
        <input type="text" placeholder="Buscar...">
        <button>üîç</button>
    </div>

    <div class="icons">
        <!-- √Årea do usu√°rio -->
        <div class="user-area" style="display: flex; align-items: center; gap: 10px;">
            <span id="user-display" style="color: white; font-size: 14px;">Visitante</span>
            
            <!-- Menu quando n√£o logado -->
            <div id="auth-buttons" style="display: flex; gap: 5px;">
                <a href="login.html" style="text-decoration: none;">
                    <img src="assets/svg/profile-1341-svgrepo-com (1).svg" alt="Login" width="30px">
                </a>
            </div>
            
            <!-- Menu quando logado -->
            <div id="user-menu" style="display: none; gap: 10px; align-items: center;">
                <a href="profile.html" style="text-decoration: none;">
                    <img src="assets/svg/profile-1341-svgrepo-com (1).svg" alt="Perfil" width="30px">
                </a>
                <button onclick="logout()" style="background: none; border: none; cursor: pointer; padding: 5px;">
                    <img src="assets/svg/logout-svgrepo-com.svg" alt="Sair" width="25px">
                </button>
            </div>
        </div>

        <div class="carrinho" onclick="abrirCarrinho()">
            <img src="assets/svg/cart-shopping-svgrepo-com (1).svg" alt="Carrinho" width="30px"> 
        </div>
    </div>
</header>

    <main>
        <div class="profile-container">
            <div class="profile-header">
                <h1>Meu Perfil</h1>
                <p>Gerencie suas informa√ß√µes pessoais</p>
            </div>
            
            <div class="profile-info">
                <div class="info-card">
                    <h3>Informa√ß√µes Pessoais</h3>
                    <p><strong>Usu√°rio:</strong> <span id="profile-username"></span></p>
                    <p><strong>Email:</strong> <span id="profile-email"></span></p>
                    <p><strong>Tipo:</strong> <span id="profile-type"></span></p>
                </div>
                
                <div class="info-card">
                    <h3>Estat√≠sticas</h3>
                    <p><strong>Membro desde:</strong> Hoje</p>
                    <p><strong>Pedidos realizados:</strong> 0</p>
                    <p><strong>Status:</strong> Ativo</p>
                </div>
            </div>
            
            <div style="text-align: center;">
                <button onclick="logout()" class="btn-logout">Sair da Conta</button>
            </div>
        </div>
    </main>

    <script src="scripts/app.js"></script>
    <script>
        // Protege a p√°gina e carrega informa√ß√µes do usu√°rio
        document.addEventListener('DOMContentLoaded', function() {
            protegerPagina();
            carregarInformacoesUsuario();
            atualizarHeaderUsuario();
        });

        function carregarInformacoesUsuario() {
            const usuario = JSON.parse(localStorage.getItem('usuarioLogado') || '{}');
            
            if (usuario.user) {
                document.getElementById('profile-username').textContent = usuario.user;
                document.getElementById('profile-email').textContent = usuario.email || 'N√£o informado';
                document.getElementById('profile-type').textContent = usuario.tipo === 'adm' ? 'Administrador' : 'Usu√°rio';
            }
        }

        function atualizarHeaderUsuario() {
            const usuario = JSON.parse(localStorage.getItem('usuarioLogado') || '{}');
            const userDisplay = document.getElementById('user-display');
            
            if (usuario.user) {
                userDisplay.textContent = `Ol√°, ${usuario.user}`;
            } else {
                userDisplay.textContent = 'Visitante';
            }
        }
    </script>
</body>
</html>